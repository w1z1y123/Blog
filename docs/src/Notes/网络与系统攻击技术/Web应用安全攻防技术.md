---
desc: "Web应用安全攻防技术"
tags: "网络与系统攻击技术"
outline: deep
---

# Web 安全

## Web 应用程序体系结构与威胁

### 从C/S 向 B/S 的演变

client:客户端软件
Server:服务器软件
Browser:浏览器

### 从HTML到动态页面

HTML：静态标记语言
    - Tag标签：表格等结构标签，超连接，内嵌连接，图片

CGI: 后台动态生成HTML
    - 前后端进行分离，前端通过Aja向后台发送请求，后台将数据通过json格式进行返回

### 浏览器介绍

- 早期，简单的静态HTML页面解析与渲染
- 1995 Netscape 引入 JavaScript,客户端脚本语言
- 1996 Adobe 引入 Flash
- 1999 Sun: Servlet
- 2005 Ajax
  
### Web服务器

- 处理浏览器访问的请求
- 动态生成页面进行返回
- 或者以json格式返回数据

### Web应用程序

**MVC 分层模型**
- Model(模型)：代表着应用程序的数据和业务逻辑
- View(视图)：负责展示数据给用户
- Controller(控制器)：控制器处理用户的输入，然后调用模型以及视图完成用户的请求

**常见的三层模型**
- 表示层：接收Web客户端输入并显示结果(Controller View)
- 业务逻辑层：完成Web应用业务逻辑处理(Model)
- 数据访问层：访问数据库，执行增删查改(DAO) 
### HTTP 与 HTTPS协议

**HTTP**
- 缺省TCP 80端口
- 明文传输的简单协议
- 状态管理：cookies保持连接状态
- 身份认证：基础认证等多种认证协议

**HTTPS**
- 基于SSL/TLS：提供对传输层认证(AH)和加密(ESP)
- 缺省TCP 443端口


### Web应用安全

- 数据：敏感信息泄露、内容篡改、不良信息内容
- Web应用程序：代码注入攻击/xSS攻击
- 服务器：针对Web服务器软件的渗透攻击
- 系统安全威胁：远程和本地渗透攻击
- 网络：机密窃听、假冒身份攻击

## Web 应用安全攻防技术概述

### Web 应用攻击路线
- Web应用信息收集(踩点、搜点与查点)
  - 手工审查
  - 自动下载/镜像查点
  - Google Hacking的应用
  
- Web应用攻击
  - 攻击Web服务器
  - 攻击Web应用程序
  - 攻击Web数据内容
- 本地攻击

**手工审查**
- 静态和动态生成的页面(查看影藏信息、页面的命名规则)
- 目录结构(探查web站点的目录结构视图)
- 辅助性文件
  - CSS级联样式表、XML配置信息、Javascript文件
  - 输入表单
  - 查询参数字符串

**自动下载/镜像查点**

使用爬虫技术，对于Web站点进行离线审查

**Google Hacking的应用**

GHDB(Google Hacking Database):收集了各种Google高级搜索运算符（Google Dorks）的数据库，这些运算符可以用来找到网络上的敏感信息和暴露的系统细节

**Web应用的主要攻击点**
- 身份认证
- 会话管理
- 数据库操作
- 输入数据合法、合理性检测


**攻击Web服务器软件**

- 数据驱动的远程代码执行安全漏洞
  - 缓冲区溢出漏洞攻击
- 服务拓展功能扩展模块漏洞(拓展功能中出现的漏洞)
- 样本文件安全漏洞
- 源代码披露
- 资源解析攻击
  - 资源解析：把同一资源的不同表示形式解析为它的标准化名称的过程（可能遗漏对于合法性的检测）

**攻击Web应用程序**

安全最为薄弱的环节

- 针对认证机制的攻击
- 针对授权机制的攻击
- 客户端攻击
- 命令执行攻击
- 信息暴露
- 逻辑攻击

**攻击Web数据内容**
- 安全敏感信息泄露
- 网站内容篡改
- 不良信息的上传


## SQl注入

Web应用程序的输入验证机制不够完善，执行由攻击者所注入的恶意指令与代码

### 攻击目标分类

- 恶意读取、修改与操纵数据库的SQL注入攻击
- 在Web服务器端安装，执行Webshell等恶意脚本的PHP注入攻击
- 在Web服务器端恶意执行操作系统命令的Shell注入攻击
- 其他种类攻击

### SQl注入攻击

利用Web应用程序数据层存在的输入不完善型安全漏洞实施的一类代码注入攻击技术

**攻击步骤**
1. 发现SQL注入点
2. 判断后台数据库类型
3. 利用SQL注入进行后台口令的拆解
4. 上传ASP后门，得到默认账户权限
5. 本地特权的提升与利用数据库扩展存储功能


## XSS跨站脚本攻击

跨站脚本时一种通常存在于Web应用程序中的安全漏洞，使得攻击者可以将恶意代码注入到网页中，从而危害其他的Web访问者

### 典型跨站脚本攻击

- 查看用户端会话Cookie
- 窃取Cookie
- 网页挂马

### 跨站脚本攻击类型
- 持久型XSS(Web应用程序允许用户输入内容并持久保存并显示在网页上)
- 非持久型XSS
- DOM-based(本地XSS, 如JS本地生成HTML页面中存在)

