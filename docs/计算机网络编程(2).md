# 客户机软件设计

## 应用程序如何发起通信成为客户

**前提基础**
::: tip
1. 客户还是服务器
2. 端点地址
3. 使用面向连接的还是无连接的
4. 所需要的缓存的大小等
5. 如何执行授权和防护准则
:::

**客户体系前提**
::: tip
1. 常规和应用程序一样执行，不需要特权
2. 依赖操作系统进行保护，不需要强行保护
3. 不需要明显的处理并发性
:::

**标识服务器位置**

1. 编译程序时，将服务器的域名或IP地址说明为常量
``` c 
#define SERVER_IP "192.168.1.1"
```

2. 要求用户在启动程序时标定服务器
```c
[server]  //启动应用程序时，通过命令标定
ip=192.168.1.1  
```
:::  warning 区别
用户在调用客户软件时指明服务器地址:用户每次都需要手动输入服务器地址

要求用户在启动程序时标定服务器:服务器地址只需要输入一次，然后就会被保存和自动使用
:::
3. 从稳定的存储设备中获得关于服务器的信息
``` c
{
    "server_hostname": "www.example.com",
    "server_port": 1234
}   //相关信息写在配置文件里面

```
4. 使用某个单独的协议来找到服务器
::: warning 缺点
它需要更复杂的网络配置和管理，可能需要使用特定的网络协议或工具。而且，如果网络环境不支持这些协议或工具，或者网络环境的配置发生了变化，可能会导致问题
:::
**分析地址参数**

参数由`字符串`构成
``` c
//使用两个参数：
www.baidu.com  80
//使用单个参数：
www.baidu.com:80

```
::: tip
linux使用单独参数指明服务器的机器地址和协议端口 
:::
**查找域名**

使用`sockaddr_in`结构指明服务器的地址
::: tip
需要二进制表示、符合网络字节顺序的32bit IP地址
:::
常用函数：
- `inet_addr`:IP地址点分十进制到二进制的转换
- `gethostbyname`:主机域名到二进制的转换

## 如何使用 TCP或UDP 与服务器联系

### tcp
::: tip
1. 找到期望与之通信的服务器IP地址和协议端口号
2. 分配套接字
3. 指明此连接需要在本地机器中的、任意的、未使用的协议端口，并允许TCP选择一个这样的端口
4. 将这个套接字连接到服务器
5. 使用应用级协议与服务器通信
6. 关闭连接

:::


## 如何使用套接字调用与协议交互

## 客户软件举例